version: '2'
services:
  # vouched-gemfury-client-nodejs:
  #   container_name: vouched-gemfury-client-nodejs
  #   build:
  #     context: .
  #     dockerfile: ops/docker/Dockerfile.gemfury
  #     args:
  #       - GEM_FURY_TOKEN=${GEM_FURY_TOKEN}
  #   security_opt:
  #     - seccomp:unconfined
  #   env_file: .env
  #   volumes:
  #     - ./src:/opt/app/src:cached
  #     - ./tests-gemfury:/opt/app/tests:cached
  #   networks:
  #     - wlynet

  vouched-client-nodejs:
    image: vouched-client-nodejs
    security_opt:
      - seccomp:unconfined
    env_file: .env
    build:
      context: .
      dockerfile: ops/docker/Dockerfile
    volumes:
      - ./src:/opt/app/src:cached
      - ./tests:/opt/app/tests:cached
    networks:
      - wlynet

networks:
  wlynet:
    external:
      name: woollylabs_wlynet
